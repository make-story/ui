/* 2016-06-09 Copyright (c) Sung-min Yu. */ !function(a,b){"use strict";return"undefined"==typeof a||a!==window?!1:(a.api||(a.api={}),void(a.api.state=function(a){return function(){var a={},c={},d=function(c){var d,e,c=c||{},f=c.name||"",g=c.value,h="value"in c,i=[],j=a;for(i=f.split("."),d=0,e=i.length-1;e>d;d++)j="object"==typeof j[i[d]]?j[i[d]]:j[i[d]]={};return j=h?j[i[d]]=g:i[d]in j?j[i[d]]&&"object"==typeof j[i[d]]&&(Array.isArray(j[i[d]])||/^{.*}$/.test(JSON.stringify(j[i[d]])))?JSON.parse(JSON.stringify(j[i[d]])):j[i[d]]:j[i[d]]=b};return{get:function(a){return d({name:a})},set:function(a){var b,e,f,a=a||{},g=a.name||"",h=a.value;if(d({name:g,value:h}),c[g])for(b=0,e=c[g].length;e>b;b++)if(c[g][b].value===h){for(f in c[g][b].handler)c[g][b].handler[f].call(this,h);break}},on:function(a){var b,d,a=a||{},e=a.name,f=a.value,g=a.key||api.key(),h="function"==typeof a.handler?a.handler:function(){},i=!1;for(c[e]||(c[e]=[]),b=0,d=c[e].length;d>b;b++)if(c[e][b].value===f){c[e][b].handler[g]=h,i=!0;break}i===!1&&c[e].push(function(){var a={value:f,handler:{}};return a.handler[g]=h,a}())},off:function(a){var b,d,a=a||{},e=a.name||"",f=a.key,g=!1;if(c[e])if(f&&c[e]&&f){for(b=0,d=c[e].length;d>b;b++)if(f in c[e][b].handler){g=delete c[e][b].handler[f];break}}else f||(g=delete c[e]);return g}}}()}))}(this);