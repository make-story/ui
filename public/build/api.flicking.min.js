/* 2016-06-22 Copyright (c) Sung-min Yu. */ !function(a,b){"use strict";return!("undefined"==typeof b||b!==window||!(b.api&&b.api.dom||b.jQuery))&&(b.api||(b.api={}),void(b.api.flicking=a(b,b.jQuery||b.api.dom)))}(function(a,b,c){"use strict";var d={};a.api&&a.api.env?d=a.api.env:(d={check:{touch:"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,transition:!1},event:{down:"mousedown",move:"mousemove",up:"mouseup",transitionend:"transitionend"}},d.check.touch===!0&&(d.event.down="touchstart",d.event.move="touchmove",d.event.up="touchend"),function(){var a,b={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},e=document.createElement("div");for(a in b)if(e.style[a]!==c){d.check.transition=!0,d.event.transitionend=b[a];break}}());var e=function(){function a(){var a=this;a.instance={}}return a.prototype={init:function(){},setSettings:function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(b[c]&&b[c].constructor===Object&&!b[c].nodeType?(a[c]=a[c]||{},a[c]=this.setSettings(a[c],b[c])):a[c]=b[c]);return a},setTranslate:function(a){var a=a||{},b=a.duration,c=a.translateX,d=a.target;try{d.style.webkitTransitionDuration=d.style.MozTransitionDuration=d.style.msTransitionDuration=d.style.OTransitionDuration=d.style.transitionDuration=b+"s",d.style.webkitTransform="translate("+c+"px, 0)translateZ(0)",d.style.msTransform=d.style.MozTransform=d.style.OTransform="translateX("+c+"px)"}catch(e){return console.log(e),!1}},setAnimate:function(a){}},new a}(),f=function(a){var b=this;b.settings={key:"",total:0,width:0,target:null,speed:300,touch:!0,auto:0,callback:null,transitionend:null},b.settings=e.setSettings(b.settings,a),b.translate=0,b.index=1,b.time=null,b.init(),b.on(),b.autoStart()};return f.prototype={init:function(){var a=this;return this.start={left:0,top:0,time:0},this.end={left:0,top:0,time:0},a},change:function(a){var b=this;return b},on:function(){var a=this;return a.off(),a.settings.touch===!0&&(b(a.settings.target).on(d.event.down+".EVENT_MOUSEDOWN_flicking",function(c){var f=c||window.event,g=f.touches;d.check.touch||(f.preventDefault?f.preventDefault():f.returnValue=!1),g&&g.length&&1<g.length||(b(window).off(".EVENT_MOUSEMOVE_flicking"),b(window).off(".EVENT_MOUSEUP_flicking"),a.autoStop(),a.init(),g?(a.start.left=g[0].clientX,a.start.top=g[0].clientY):(a.start.left=f.clientX,a.start.top=f.clientY),a.start.time=(new Date).getTime(),b(window).on(d.event.move+".EVENT_MOUSEMOVE_flicking",function(b){var c,d,f,g=b||window.event,h=g.touches||g.changedTouches;h?(c=h[0].clientX,d=h[0].clientY):(c=g.clientX,d=g.clientY),Math.abs(c-a.start.left)>Math.abs(d-a.start.top)&&(g.preventDefault?g.preventDefault():g.returnValue=!1,f=c-a.start.left+a.translate,e.setTranslate({duration:0,translateX:f,target:a.settings.target}))}),b(window).on(d.event.up+".EVENT_MOUSEUP_flicking",function(c){var d,e,f,g,h,i=c||window.event,j=i.changedTouches;i.preventDefault?i.preventDefault():i.returnValue=!1,j?(a.end.left=j[0].clientX,a.end.top=j[0].clientY):(a.end.left=i.clientX,a.end.top=i.clientY),a.end.time=(new Date).getTime(),d=Number(a.end.time)-Number(a.start.time),e=a.end.left-a.start.left,f=a.end.top-a.start.top,g=a.index,h=Number(a.settings.speed)/1e3,Math.abs(e)>Math.abs(f)&&(d<=100&&30<=Math.abs(e)||a.settings.width/6<Math.abs(e))&&(g<a.settings.total&&e<0?g++:1<g&&e>0&&g--,h=d>1e3||6e3<d?h:(d+100)/1e3),a.slide({value:g,duration:h}),b(window).off(".EVENT_MOUSEMOVE_flicking"),b(window).off(".EVENT_MOUSEUP_flicking"),a.autoStart(),a.init()}))}),"function"==typeof a.settings.transitionend&&b(a.settings.target).on(d.event.transitionend+".EVENT_TRANSITION_flicking",function(b){var c=b||window.event;a.settings.target.isEqualNode(c.target)&&a.settings.transitionend.call(a.settings.target,a.index)})),a},off:function(){var a=this;return b(window).off(".EVENT_MOUSEMOVE_flicking"),b(window).off(".EVENT_MOUSEUP_flicking"),b(a.settings.target).off(".EVENT_MOUSEDOWN_flicking"),b(a.settings.target).off(".EVENT_TRANSITION_flicking"),a},slide:function(a){var b=this,a=a||{},c=a.value,d=a.duration?a.duration:Number(b.settings.speed)/1e3,f=b.index;switch(c){case"next":f<b.settings.total&&(f+=1);break;case"prev":1<f&&(f-=1);break;default:f!==c&&1<=c&&c<=b.settings.total&&(f=c)}return"number"==typeof f&&0<f&&(b.index<f||b.index>f)&&(b.translate=b.settings.width*(f-1)*-1,b.index=f),e.setTranslate({duration:d,translateX:b.translate,target:b.settings.target}),"function"==typeof b.settings.callback&&b.settings.callback.call(b.settings.target,b.index),b.autoStart(),!0},autoStart:function(){var a=this;a.autoStop(),a.settings.auto>0&&(a.time=window.setTimeout(function(){a.index<a.settings.total?a.slide({value:"next"}):a.slide({value:1})},a.settings.auto))},autoStop:function(){var a=this;window.clearTimeout(a.time)}},{search:function(a){return e.instance[a]||!1},setup:function(a){var b;return a.key&&this.search(a.key)?(b=this.search(a.key),b.change(a)):(b=new f(a),a.key&&(e.instance[a.key]=b)),b},on:function(a){if(a)this.search(a)&&this.search(a).on();else for(a in e.instance)e.instance.hasOwnProperty(a)&&e.instance[a].on()},off:function(a){if(a)this.search(a)&&this.search(a).off();else for(a in e.instance)e.instance.hasOwnProperty(a)&&e.instance[a].off()}}},this);