/* 2016-06-29 Copyright (c) Sung-min Yu. */ !function(a,b){"use strict";return"undefined"!=typeof b&&b===window&&(b.api||(b.api={}),void(b.api.worker=a(b)))}(function(a,b){"use strict";return function(a){var b,c=0,d=function(a){var c,d=this;d.settings={url:"",callback:{message:null,error:null}},c=function e(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(b[c]&&b[c].constructor===Object&&!b[c].nodeType?(a[c]=a[c]||{},a[c]=e(a[c],b[c])):a[c]=b[c]);return a},d.settings=c(d.settings,a),b=new Worker(d.settings.url),b.onmessage=function(a){"function"==typeof d.settings.callback.message&&d.settings.callback.message.call(this,a.data||{})},b.onerror=function(a){"function"==typeof d.settings.callback.error&&d.settings.callback.error.call(this,a)}};return d.prototype={send:function(a){var d=this;return b.postMessage({order:++c,data:a}),d},close:function(){var a=this;return b.terminate(),a}},new d(a)}},this);